---
import Layout from "../../layouts/Layout.astro";
import Logo from "../../assets/labaLogo.svg";
import ZigZag from "../_components/ZigZag.astro";
import { type Ekintza } from "models/Ekintza";
import MarkdownParser from "../_components/MarkdownParser.astro";
import type { Hasiera } from "models/Hasiera";
import PartehartzeaCard from "./components/PartehartzeaCard.astro";
import Header from "../_components/Header.astro";
import Footer from "../_components/Footer.astro";
import EkintzaZerrenda from "../_components/EkintzaZerrenda.astro";
import IrudiEstela from "views/_components/IrudiEstela.astro";

interface Props {
  hasiera: Hasiera;
  ekintzak: Ekintza[];
}

const { hasiera, ekintzak } = Astro.props;

const { izenburua, izanLabazkide, parteHartu, mosaikoa }: Hasiera = hasiera;
---

<Layout title={izenburua}>
  <Header isAbsolutePosition />

  <main class="main">
    <section class="hero">
      <h1>
        <span class="visually-hidden">Laba</span>
        <Logo class="logo" aria-title="Laba" />
      </h1>

      <IrudiEstela mosaikoa={mosaikoa} />
    </section>

    <ZigZag from="marroia" />

    <section class="agenda" id="agenda">
      <EkintzaZerrenda ekintzak={ekintzak} title="Agenda" />
    </section>

    <ZigZag from="gorria-background" to="gorria" />

    <section class="izan-labazkide" id="izan-labazkide">
      <div class="labazkide-wrapper">
        <h2 class="title">{izanLabazkide.izenburua}</h2>

        <MarkdownParser content={izanLabazkide.deskribapena} />

        <a class="izan-labazkide--url" href={izanLabazkide.url.url}
          >{izanLabazkide.url.label}</a
        >
      </div>
    </section>

    <ZigZag from="gorria" to="gorria-background" />

    <section class="parte-hartu" id="parte-hartu">
      <h2 class="title">{parteHartu.izenburua}</h2>

      <div class="parte-hartzeak--wrapper">
        <ul class="parte-hartzeak">
          {
            parteHartu.parteHartzea.map((parteHartzea) => (
              <PartehartzeaCard partehartzea={parteHartzea} />
            ))
          }
        </ul>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<style lang="scss">
  @use "../../style/mixins/displayFonts.scss";
  @use "../../style/tools/mediaQueries.scss";

  @mixin sectionPadding() {
    padding: var(--space-07-mobile) var(--space-05-mobile);

    @include mediaQueries.aboveTablet {
      padding: var(--space-10-desktop) var(--space-07-desktop);
    }
  }

  .main {
    background-color: var(--gorria-background);
  }

  .hero {
    position: relative;

    min-height: 97dvh;
    display: flex;
    align-items: flex-end;
    padding: var(--space-05-mobile);

    background-color: var(--marroia);
    color: var(--gorria);

    // TODO lortu bertikalean overflow-ak funtzionatzea
    overflow-x: hidden;

    @include mediaQueries.aboveTablet {
      padding: var(--space-07-desktop);
    }
  }

  h1 {
    width: 100%;
    z-index: 20;

    @include mediaQueries.aboveTablet {
      width: fit-content;
    }
  }

  .logo {
    width: 100%;

    @include mediaQueries.aboveTablet {
      height: 33dvh;
    }
  }

  .agenda {
    @include sectionPadding;
  }

  .izan-labazkide {
    display: grid;
    grid-template-columns: repeat(12, [col-start] 1fr);
    gap: var(--space-03-mobile);
    @include sectionPadding;

    background-color: var(--gorria);
    color: var(--zuria);

    @include mediaQueries.aboveTablet {
      gap: var(--space-05-desktop);
    }
  }

  .labazkide-wrapper {
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: var(--space-05-mobile);

    grid-column: col-start 1 / -1;

    @include mediaQueries.aboveTablet {
      gap: var(--space-05-desktop);
      grid-column: col-start 4 / span 6;
    }
  }

  .izan-labazkide--url {
    color: var(--zuria);
  }

  .parte-hartu {
    display: flex;
    align-items: center;
    flex-direction: column;
    @include sectionPadding;
    gap: var(--space-06-mobile);

    color: var(--marroia);

    @include mediaQueries.aboveTablet {
      gap: var(--space-06-desktop);
    }
  }

  .parte-hartzeak {
    display: flex;
    flex-direction: column;
    gap: var(--space-05-desktop);
    grid-column: col-start 2 / span 10;
    padding: 0;

    list-style: none;

    @include mediaQueries.aboveTablet {
      flex-direction: row;
      gap: var(--space-05-desktop);
      justify-content: center;
    }
  }

  .parte-hartzeak--wrapper {
    display: grid;
    grid-template-columns: repeat(12, [col-start] 1fr);
    gap: var(--space-05-desktop);
  }

  .title {
    @include displayFonts.display2;
  }
</style>
